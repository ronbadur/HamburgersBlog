@model IEnumerable<HamburgersBlog.Models.Post>

<div id="multicolumns" class="mul-col-blue container text-center">

    <section id="videoContainer">
        <!-- Introduction -->
        <video width="400" controls>
            <source src="~/Media/videos/10SecretFactsAboutDISNEYPrincesses.mp4" type="video/mp4">
        </video>
    </section>
    <canvas id="myCanvas" width="300" height="100"></canvas>
</div>

<script>
    const size = 500;
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    ctx.font = "30px Arial";
    ctx.strokeText("Princesses", 20, 40);
</script>


<div class="container">
    @{
        Dictionary<string, int> counterDictionary = (Dictionary<string, int>)Session["counterDictionary"];
        if (counterDictionary != null)
        {
            string favPrincessName = counterDictionary.FirstOrDefault(x => x.Value == counterDictionary.Values.Max()).Key;
            <div class="alert alert-success">Like @Html.Raw(favPrincessName)? @Html.ActionLink("click", "Filter", new { princessName = favPrincessName }) for more</div>
        }
    }

    @using (Html.BeginForm("Filter", "Posts", FormMethod.Post, new { @class = "form-inline" }))
    {
        <h3>Filter posts by</h3>
        <div class="form-group">
            @Html.DropDownList("princessRoyaltyType", EnumHelper.GetSelectList(typeof(HamburgersBlog.Models.KingdomType)), "RoyaltyType", new { @class = "form-control" })
        </div>


        <div class="form-group">
            @Html.TextBox("authorName", "", new { @class = "form-control", placeholder = "Author Name" })
        </div>

        <div class="form-group">
            @Html.TextBox("princessName", "", new { @class = "form-control", placeholder = "Princess Name" })
        </div>

        <input class="btn btn-search-posts" type="submit" value="Search" />
    }



    <hr />
    <div class="container row">
        <div class="list-inline buttons">
            @using (Html.BeginForm("GroupByPrincess", "Posts"))
            {
                <input class="btn btn-lg btn-stats" type="submit" value="Posts Stats" />
                <p class="btn btn-lg btn-add-blog" href="#" role="button">@Html.ActionLink("Add Post", "Create", null, new { @style = "color: #FF8A80;" })</p>
            }

        </div>
    </div>


</div>


<hr />


@foreach (var item in Model)
{
    <div class="blog-post">
        <p class="blog-post-title">@Html.ActionLink(item.Title, "Details", new { id = item.PostID }, new { @style = "text-decoration:none; color: black;" }) </p>

        <div class="blog-post-meta">@Convert.ToString(string.Format("{0:dd/MM/yyyy}", item.Date))</div>
        <p>@Html.DisplayFor(modelItem => item.Content)</p>

        <footer class="blockquote-footer">@Html.DisplayFor(modelItem => item.AuthorName), <cite>@Html.DisplayFor(modelItem => item.Princess.Name)</cite></footer>
        @{ if (Request.IsAuthenticated)
            {
                <div>
                    @Html.ActionLink("Edit", "Edit", new { id = item.PostID }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.PostID })
                </div>
            }
        }
    </div>
}
